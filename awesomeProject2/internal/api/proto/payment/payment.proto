syntax = "proto3";

package payment;

option go_package = "/payment";

enum Status {
  unknown=0;
  failed=1;
  success=2;
}
service PaymentService {
  rpc Charge(ChargeReq) returns (ChargeResp) {}
  rpc CancelChargeByTimeout(CancelChargeReq) returns(CancelChargeResp) {}
  rpc CheckPaymentStatus(CheckPaymentStatusReq) returns (CheckPaymentStatusResp);
}

message CreditCardInfo {
  string credit_card_number = 1;
  int64 credit_card_cvv = 2;
}

message ChargeReq {
  float amount = 1;
  CreditCardInfo credit_card = 2;
  int64 order_id = 3;
  int64 user_id = 4;
}

message ChargeResp {
  string transaction_id = 1;
}
message CancelChargeReq{
  string transaction_id = 1;
}
message CancelChargeResp{
  bool success = 1;
}
message CheckPaymentStatusReq{
  string transaction_id = 1;
}
message CheckPaymentStatusResp{
  Status status =1;
}